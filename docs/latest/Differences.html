<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.7<span class="sout">.3</span><span class="uwave">.4</span>)
</p><!--l. 161--><p class="noindent" >[2021.09.28]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2021 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     <!--l. 628--><p class="noindent" >nvram.plist <br 
class="newline" />OpenCore variable import file.
     </p></li>
     <li class="itemize">
     <!--l. 631--><p class="noindent" >opencore-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />OpenCore log file.
     </p></li>
     <li class="itemize">
     <!--l. 634--><p class="noindent" >panic-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />Kernel panic log file.</p></li></ul>
<!--l. 638--><p class="noindent" >Note: It is not guaranteed that paths longer than OC_STORAGE_SAFE_PATH_MAX (128 characters including the
<br 
class="newline" />0-terminator) will be accessible within OpenCore.
<a 
 id="x1-9001r9"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-100002"></a>Installation and Upgrade</h4>
<!--l. 644--><p class="noindent" >To install OpenCore, replicate the ?? described in the previous section in the EFI volume of a GPT partition. While
corresponding sections of this document provide some information regarding external resources such as ACPI tables, UEFI
drivers, or kernel extensions (kexts), completeness of the matter is out of the scope of this document. Information about kernel
extensions may be found in a separate <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Kexts.md" >Kext List</a> document available in the OpenCore repository. Vaulting information is
provided in the ?? section of this document.
</p><!--l. 656--><p class="noindent" >The OC config file, as with any property list file, can be edited with any text editor, such as nano or vim. However, specialised
software may provide a better experience. On macOS, the preferred GUI application is <a 
href="https://developer.apple.com/xcode" >Xcode</a>. <span class="sout">For a lightweight</span><span class="uwave">The
</span><a 
href="https://github.com/corpnewt/ProperTree" ><span class="uwave">ProperTree</span></a> <span class="uwave">editor is a lightweight, </span>cross-platform and open-source alternative<span class="sout">, the </span><a 
href="https://github.com/corpnewt/ProperTree" ><span class="sout">ProperTree</span></a> <span class="sout">editor can be
utilised</span>.
</p><!--l. 666--><p class="noindent" >It is strongly <span class="sout">advised not to use any software that is </span><span class="uwave">recommended to avoid configuration creation tools that are </span>aware of the
internal <span class="sout">configration structure as it constantly gets out of date and will cause incorrect configuration to be generated. If it is a
must desprite the warning one should make sure to only use </span><span class="uwave">configuration structure as this may result in invalid
configurations (since the structure gets constantly updated). If such tools are to be used despite this warning,
ensure that only </span>stable versions of OpenCore <span class="sout">with explicit support for the particular version in the app. The
choice </span><span class="uwave">explicitly supported by such tools are used. In such cases, the use </span>of open-source implementations with
transparent binary generation <span class="sout">is encouraged (e.g. </span><span class="uwave">(such as </span><a 
href="https://github.com/ic005k/QtOpenCoreConfig" >OCAT</a>) <span class="sout">, since </span><span class="uwave">is encouraged, given that </span>other tools
may contain malware. <span class="sout">Remember that a configuration made for a different hardware setup shall </span><span class="uwave">In addition,
configurations created for a specific hardware setup should </span>never be used on <span class="sout">another hardware setup</span><span class="uwave">different hardware
setups</span>.
</p><!--l. 681--><p class="noindent" >For BIOS booting, a third-party UEFI environment provider is required and OpenDuetPkg is one such UEFI environment
provider for legacy systems. To run OpenCore on such a legacy system, OpenDuetPkg can be installed with a dedicated tool —
BootInstall (bundled with OpenCore). <a 
href="https://github.com/corpnewt/gibMacOS" >Third-party utilities</a> can be used to perform this on systems other than
macOS.
</p><!--l. 688--><p class="noindent" >For upgrade purposes, refer to the Differences.pdf document which provides information about changes to the configuration
(as compared to the previous release) as well as to the Changelog.md document (which contains a list of modifications across
all published updates).
<a 
 id="x1-10001r10"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-110003"></a>Contribution</h4>
<!--l. 695--><p class="noindent" >OpenCore can be compiled as a standard <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II" >EDK II</a> package and requires the <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II#stable-tags" >EDK II Stable</a> package. The currently supported
EDK II release is hosted in <a 
href="https://github.com/acidanthera/audk" >acidanthera/audk</a>. Required patches for this package can be found in the Patches
directory.
</p><!--l. 703--><p class="noindent" >The only officially supported toolchain is XCODE5. Other toolchains might work but are neither supported nor recommended.
Contributions of clean patches are welcome. Please do follow <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II C Codestyle</a>.
</p><!--l. 708--><p class="noindent" >To compile with XCODE5, besides <a 
href="https://developer.apple.com/xcode" >Xcode</a>, users should also install <a 
href="https://www.nasm.us" >NASM</a> and <a 
href="https://github.com/acidanthera/ocbuild/tree/master/external" >MTOC</a>. The latest Xcode version is recommended
for use despite the toolchain name. An example command sequence is as follows:
                                                                                                  
                                                                                                  
     </p></li>
     <li class="itemize">
     <!--l. 1321--><p class="noindent" >Above 4G Decoding or  similar  enabled  in  firmware  settings  if  present.  Note  that  on  some  motherboards,
     notably the ASUS WS-X299-PRO, this option results in adverse effects and must be disabled. While no other
     motherboards with the same issue are known, this option should be checked first whenever erratic boot failures
     are encountered.
     </p></li>
     <li class="itemize">
     <!--l. 1326--><p class="noindent" >DisableIoMapper quirk enabled, or VT-d disabled in firmware settings if present, or ACPI DMAR table deleted.
     </p></li>
     <li class="itemize">
     <!--l. 1328--><p class="noindent" >No ‘slide‘ boot argument present in NVRAM or anywhere else. It is not necessary unless the system cannot be
     booted at all or No slide values are usable! Use custom slide! message can be seen in the log.
     </p></li>
     <li class="itemize">
     <!--l. 1331--><p class="noindent" >CFG Lock (MSR 0xE2 write protection) disabled in firmware settings if present. Refer to the ?? notes for details.
     </p></li>
     <li class="itemize">
     <!--l. 1334--><p class="noindent" >CSM (Compatibility Support Module) disabled in firmware settings if present. On NVIDIA 6xx/AMD 2xx or
     older, GOP ROM may have to be flashed first. Use <a 
href="https://www.win-raid.com/t892f16-AMD-and-Nvidia-GOP-update-No-requests-DIY.html" >GopUpdate</a> (see the second post) or <a 
href="http://www.insanelymac.com/forum/topic/299614-asus-eah6450-video-bios-uefi-gop-upgrade-and-gop-uefi-binary-in-efi-for-many-ati-cards/page-1#entry2042163" >AMD UEFI GOP
     MAKER</a> in case of any potential confusion.
     </p></li>
     <li class="itemize">
     <!--l. 1339--><p class="noindent" >EHCI/XHCI Hand-off enabled in firmware settings only if boot stalls unless USB devices are disconnected.
     </p></li>
     <li class="itemize">
     <!--l. 1341--><p class="noindent" >VT-x, Hyper Threading, Execute Disable Bit enabled in firmware settings if present.
     </p></li>
     <li class="itemize">
     <!--l. 1343--><p class="noindent" >While it may not be required, sometimes Thunderbolt support, Intel SGX, and Intel Platform Trust may
     have to be disabled in firmware settings present.</p></li></ul>
<!--l. 1348--><p class="noindent" >When debugging sleep issues, Power Nap and automatic power off (which appear to sometimes cause wake to black screen or
boot loop issues on older platforms) may be temporarily disabled. The specific issues may vary, but ACPI tables should
typically be looked at first.
</p><!--l. 1352--><p class="noindent" >Here is an example of a defect found on some <a 
href="http://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/#entry2534645" >Z68 motherboards</a>. To turn Power Nap and the others off, run the following
commands in Terminal: </p><!--l. 1355-->
<div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-22001r1"></a></span>sudo pmset autopoweroff 0 <br /> 
<span class="label"><a 
 id="x1-22002r2"></a></span>sudo pmset powernap 0 <br /> 
<span class="label"><a 
 id="x1-22003r3"></a></span>sudo pmset standby 0</div>
<!--l. 1361--><p class="noindent" >Note: These settings may be reset by hardware changes and in certain other circumstances. To view their current state, use the
pmset -g command in Terminal.
<a 
 id="x1-22004r24"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-230002"></a>Properties</h4>
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-23002x1">
     <!--l. 1369--><p class="noindent" >MmioWhitelist<br 
class="newline" />Type: plist array<br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty</span><br 
class="newline" />Description:  To  be  filled  with  plist dict values,  describing  addresses  critical  for  particular  firmware
     functioning when DevirtualiseMmio quirk is in use. Refer to the ?? section below for details.
     </p></li>
                                                                                                  
                                                                                                  
     </p></li>
<li 
  class="enumerate" id="x1-26038x19">
     <!--l. 1821--><p class="noindent" >SyncRuntimePermissions<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Update memory permissions for the runtime environment.
     </p><!--l. 1826--><p class="noindent" >Some types of firmware fail to properly handle runtime permissions: </p>
         <ul class="itemize1">
         <li class="itemize">
         <!--l. 1829--><p class="noindent" >They incorrectly mark OpenRuntime as not executable in the memory map.
         </p></li>
         <li class="itemize">
         <!--l. 1830--><p class="noindent" >They incorrectly mark OpenRuntime as not executable in the memory attributes table.
         </p></li>
         <li class="itemize">
         <!--l. 1832--><p class="noindent" >They lose entries from the memory attributes table after OpenRuntime is loaded.
         </p></li>
         <li class="itemize">
         <!--l. 1834--><p class="noindent" >They mark items in the memory attributes table as read-write-execute.</p></li></ul>
     <!--l. 1837--><p class="noindent" >This quirk attempts to update the memory map and memory attributes table to correct this.
     </p><!--l. 1839--><p class="noindent" >Note: The need for this quirk is indicated by early boot failures <span class="sout">. </span><span class="uwave">(e.g. halts at black screen), particularly in early boot of
     the Linux kernel. </span>Only firmware released after 2017 is typically affected.
</p>
     </li></ol>
<a 
 id="x1-26039r23"></a>
<h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-270006"></a>DeviceProperties</h3>
<a 
 id="x1-27001r28"></a>
<h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-280001"></a>Introduction</h4>
<!--l. 1850--><p class="noindent" >Device configuration is provided to macOS with a dedicated buffer, called EfiDevicePathPropertyDatabase. This buffer is a
serialised map of DevicePaths to a map of property names and their values.
</p><!--l. 1854--><p class="noindent" >Property data can be debugged with <a 
href="https://github.com/acidanthera/gfxutil" >gfxutil</a>. To obtain current property data, use the following command in macOS:
</p><!--l. 1857-->
<div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-28001r1"></a></span>ioreg -lw0 -p IODeviceTree -n efi -r -x | grep device-properties | <br /> 
<span class="label"><a 
 id="x1-28002r2"></a></span>  sed &#x0027;s/.*&#x003C;//;s/&#x003E;.*//&#x0027; &#x003E; /tmp/device-properties.hex &#x0026;&#x0026; <br /> 
<span class="label"><a 
 id="x1-28003r3"></a></span>  gfxutil /tmp/device-properties.hex /tmp/device-properties.plist &#x0026;&#x0026; <br /> 
<span class="label"><a 
 id="x1-28004r4"></a></span>  cat /tmp/device-properties.plist</div>
<!--l. 1864--><p class="noindent" >Device properties are part of the IODeviceTree (gIODT) plane of the macOS I/O Registry. This plane has several construction
stages relevant for the platform initialisation. While the early construction stage is performed by the XNU kernel in the
IODeviceTreeAlloc method, the majority of the construction is performed by the platform expert, implemented in
AppleACPIPlatformExpert.kext.
</p><!--l. 1871--><p class="noindent" >AppleACPIPlatformExpert incorporates two stages of IODeviceTree construction implemented by calling <br 
class="newline" />AppleACPIPlatformExpert::mergeDeviceProperties:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-28006x1">
     <!--l. 1877--><p class="noindent" >During ACPI table initialisation through the recursive ACPI namespace scanning by the calls to <br 
class="newline" />AppleACPIPlatformExpert::createDTNubs.
     </p></li>
<li 
  class="enumerate" id="x1-28008x2">
                                                                                                  
                                                                                                  
compromise the operating system, which is undesirable when secure boot is enabled.
</p><!--l. 3070--><p class="noindent" >Note 3: Some operating systems, such as Windows, may create a boot option and mark it as the topmost option upon first
boot or after NVRAM resets from within OpenCore. When this happens, the default boot entry choice will remain changed
until the next manual reconfiguration.
<a 
 id="x1-42013r44"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.2   </span> <a 
 id="x1-430002"></a>Properties</h4>
     <ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-43002x1">
     <!--l. 3078--><p class="noindent" >Boot<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply the boot configuration described in the ?? section below.
     </p></li>
<li 
  class="enumerate" id="x1-43004x2">
     <!--l. 3084--><p class="noindent" >BlessOverride<br 
class="newline" />Type: plist array<br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty</span><br 
class="newline" />Description: Add custom scanning paths through the bless model.
     </p><!--l. 3089--><p class="noindent" >To be filled with plist string entries containing absolute UEFI paths to customised bootloaders such as
     \EFI\debian\grubx64.efi for the Debian bootloader. This allows non-standard boot paths to be automatically
     discovered  by  the  OpenCore  picker.  Designwise,  they  are  equivalent  to  predefined  blessed  paths,  such  as
     \System\Library\CoreServices\boot.efi or  \EFI\Microsoft\Boot\bootmgfw.efi,  but  unlike  predefined
     bless paths, they have the highest priority.
     </p></li>
<li 
  class="enumerate" id="x1-43006x3">
     <!--l. 3099--><p class="noindent" >Debug<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply debug configuration described in the ?? section below.
     </p></li>
<li 
  class="enumerate" id="x1-43008x4">
     <!--l. 3105--><p class="noindent" >Entries<br 
class="newline" />Type: plist array<br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty</span><br 
class="newline" />Description: Add boot entries to OpenCore picker.
     </p><!--l. 3110--><p class="noindent" >To be filled with plist dict values, describing each load entry. Refer to the ?? section below for details.
     </p></li>
<li 
  class="enumerate" id="x1-43010x5">
     <!--l. 3114--><p class="noindent" >Security<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply the security configuration described in the ?? section below.
     </p></li>
<li 
  class="enumerate" id="x1-43012x6">
     <!--l. 3120--><p class="noindent" >Tools<a 
 id="x1-430116"></a>                                                </body>
</html>