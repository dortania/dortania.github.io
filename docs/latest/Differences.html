<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.7<span class="sout">.2</span><span class="uwave">.3</span>)
</p><!--l. 161--><p class="noindent" >[2021.09.03]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2021 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     <!--l. 628--><p class="noindent" >nvram.plist <br 
class="newline" />OpenCore variable import file.
     </p></li>
     <li class="itemize">
     <!--l. 631--><p class="noindent" >opencore-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />OpenCore log file.
     </p></li>
     <li class="itemize">
     <!--l. 634--><p class="noindent" >panic-YYYY-MM-DD-HHMMSS.txt <br 
class="newline" />Kernel panic log file.</p></li></ul>
<!--l. 638--><p class="noindent" >Note: It is not guaranteed that paths longer than OC_STORAGE_SAFE_PATH_MAX (128 characters including the
<br 
class="newline" />0-terminator) will be accessible within OpenCore.
<a 
 id="x1-9001r9"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-100002"></a>Installation and Upgrade</h4>
<!--l. 644--><p class="noindent" >To install OpenCore, replicate the ?? described in the previous section in the EFI volume of a GPT partition. While
corresponding sections of this document provide some information regarding external resources such as ACPI tables, UEFI
drivers, or kernel extensions (kexts), completeness of the matter is out of the scope of this document. Information about kernel
extensions may be found in a separate <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Kexts.md" >Kext List</a> document available in the OpenCore repository. Vaulting information is
provided in the ?? section of this document.
</p><!--l. 656--><p class="noindent" >The OC config file, as with any property list file, can be edited with any text editor, such as nano or vim. However, specialised
software may provide a better experience. On macOS, the preferred GUI application is <a 
href="https://developer.apple.com/xcode" >Xcode</a>. For a lightweight cross-platform
and open-source alternative, the <a 
href="https://github.com/corpnewt/ProperTree" >ProperTree</a> editor can be utilised.
</p><!--l. 664--><p class="noindent" >It is strongly advised not to use any software that is aware of the internal configration structure as it constantly gets out of
date and will cause incorrect configuration to be generated. If it is a must desprite the warning one should make sure to only
use stable versions of OpenCore with explicit support for the particular version in the app. The choice of open-source
implementations with transparent binary generation is encouraged (e.g. <a 
href="https://github.com/ic005k/QtOpenCoreConfig" >OCAT</a>), since other tools may contain malware.
Remember that a configuration made for a different hardware setup shall never be used on another hardware
setup.
</p><!--l. 675--><p class="noindent" >For BIOS booting, a third-party UEFI environment provider is required and OpenDuetPkg is one such UEFI environment
provider for legacy systems. To run OpenCore on such a legacy system, OpenDuetPkg can be installed with a dedicated tool —
BootInstall (bundled with OpenCore). <a 
href="https://github.com/corpnewt/gibMacOS" >Third-party utilities</a> can be used to perform this on systems other than
macOS.
</p><!--l. 682--><p class="noindent" >For upgrade purposes, refer to the Differences.pdf document which provides information about changes to the configuration
(as compared to the previous release) as well as to the Changelog.md document (which contains a list of modifications across
all published updates).
<a 
 id="x1-10001r10"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-110003"></a>Contribution</h4>
<!--l. 689--><p class="noindent" >OpenCore can be compiled as a standard <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II" >EDK II</a> package and requires the <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/EDK-II#stable-tags" >EDK II Stable</a> package. The currently supported
EDK II release is hosted in <a 
href="https://github.com/acidanthera/audk" >acidanthera/audk</a>. Required patches for this package can be found in the Patches
directory.
</p><!--l. 697--><p class="noindent" >The only officially supported toolchain is XCODE5. Other toolchains might work but are neither supported nor recommended.
Contributions of clean patches are welcome. Please do follow <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II C Codestyle</a>.
</p><!--l. 702--><p class="noindent" >To compile with XCODE5, besides <a 
href="https://developer.apple.com/xcode" >Xcode</a>, users should also install <a 
href="https://www.nasm.us" >NASM</a> and <a 
href="https://github.com/acidanthera/ocbuild/tree/master/external" >MTOC</a>. The latest Xcode version is recommended
for use despite the toolchain name. An example command sequence is as follows:
</p>
<!--l. 709-->
<a 
 id="x1-11001r1"></a>
<a 
 id="x1-11002"></a>
                                                                                                  
                                                                                                  
<div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-11003r1"></a></span>git clone --depth=1 https://github.com/acidanthera/audk UDK <br /> 
<span class="label"><a 
 id="x1-11004r2"></a></span>cd UDK <br /> 
<span class="label"><a 
 id="x1-11005r3"></a></span>git submodule update --init --recommend-shallow <br /> 
<span class="label"><a 
 id="x1-11006r4"></a></span>git clone --depth=1 https://github.com/acidanthera/OpenCorePkg <br /> 
<span class="label"><a 
 id="x1-11007r5"></a></span><span class="sout">source</span><span class="sout"> </span><span class="sout">edksetup</span><span class="sout">.</span><span class="sout">sh</span> <br /> 
<span class="label"><a 
 id="x1-11008r6"></a></span><span class="uwave">.</span><span class="uwave"> </span><span class="uwave">./</span><span class="uwave">edksetup</span><span class="uwave">.</span><span class="uwave">sh</span> <br /> 
<span class="label"><a 
 id="x1-11009r7"></a></span>make -C BaseTools <br /> 
<span class="label"><a 
 id="x1-11010r8"></a></span>build -a X64 -b RELEASE -t XCODE5 -p OpenCorePkg/OpenCorePkg.dsc
<figcaption class="caption" ><span class="id">Listing 1:</span><span  
class="content">Compilation Commands</span></figcaption><!--tex4ht:label?: x1-11001r -->
</div>
<!--l. 721--><p class="noindent" >For IDE usage Xcode projects are available in the root of the repositories. Another approach could be using <a 
href="https://microsoft.github.io/language-server-protocol" >Language Server
Protocols</a>. For example, <a 
href="https://www.sublimetext.com" >Sublime Text</a> with <a 
href="https://lsp.sublimetext.io" >LSP for Sublime Text</a> plugin. Add compile_flags.txt file with similar content to
the UDK root:
</p>
<!--l. 726-->
<a 
 id="x1-11011r2"></a>
<a 
 id="x1-11012"></a>
<div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-11013r1"></a></span>-I/UefiPackages/MdePkg <br /> 
<span class="label"><a 
 id="x1-11014r2"></a></span>-I/UefiPackages/MdePkg/Include <br /> 
<span class="label"><a 
 id="x1-11015r3"></a></span>-I/UefiPackages/MdePkg/Include/X64 <br /> 
<span class="label"><a 
 id="x1-11016r4"></a></span>-I/UefiPackages/MdeModulePkg <br /> 
<span class="label"><a 
 id="x1-11017r5"></a></span>-I/UefiPackages/MdeModulePkg/Include <br /> 
<span class="label"><a 
 id="x1-11018r6"></a></span>-I/UefiPackages/MdeModulePkg/Include/X64 <br /> 
<span class="label"><a 
 id="x1-11019r7"></a></span>-I/UefiPackages/OpenCorePkg/Include/AMI <br /> 
<span class="label"><a 
 id="x1-11020r8"></a></span>-I/UefiPackages/OpenCorePkg/Include/Acidanthera <br /> 
<span class="label"><a 
 id="x1-11021r9"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple <br /> 
<span class="label"><a 
 id="x1-11022r10"></a></span>-I/UefiPackages/OpenCorePkg/Include/Apple/X64 <br /> 
<span class="label"><a 
 id="x1-11023r11"></a></span>-I/UefiPackages/OpenCorePkg/Include/Duet <br /> 
<span class="label"><a 
 id="x1-11024r12"></a></span>-I/UefiPackages/OpenCorePkg/Include/Generic <br /> 
<span class="label"><a 
 id="x1-11025r13"></a></span>-I/UefiPackages/OpenCorePkg/Include/Intel <br /> 
<span class="label"><a 
 id="x1-11026r14"></a></span>-I/UefiPackages/OpenCorePkg/Include/Microsoft <br /> 
<span class="label"><a 
 id="x1-11027r15"></a></span>-I/UefiPackages/OpenCorePkg/Include/Nvidia <br /> 
<span class="label"><a 
 id="x1-11028r16"></a></span>-I/UefiPackages/OpenCorePkg/Include/VMware <br /> 
<span class="label"><a 
 id="x1-11029r17"></a></span>-I/UefiPackages/OvmfPkg/Include <br /> 
<span class="label"><a 
 id="x1-11030r18"></a></span>-I/UefiPackages/ShellPkg/Include <br /> 
<span class="label"><a 
 id="x1-11031r19"></a></span>-I/UefiPackages/UefiCpuPkg/Include <br /> 
<span class="label"><a 
 id="x1-11032r20"></a></span>-IInclude <br /> 
<span class="label"><a 
 id="x1-11033r21"></a></span>-include <br /> 
<span class="label"><a 
 id="x1-11034r22"></a></span>/UefiPackages/MdePkg/Include/Uefi.h <br /> 
<span class="label"><a 
 id="x1-11035r23"></a></span>-fshort-wchar <br /> 
<span class="label"><a 
 id="x1-11036r24"></a></span>-Wall <br /> 
<span class="label"><a 
 id="x1-11037r25"></a></span>-Wextra <br /> 
<span class="label"><a 
 id="x1-11038r26"></a></span>-Wno-unused-parameter <br /> 
<span class="label"><a 
 id="x1-11039r27"></a></span>-Wno-missing-braces <br /> 
<span class="label"><a 
 id="x1-11040r28"></a></span>-Wno-missing-field-initializers <br /> 
<span class="label"><a 
 id="x1-11041r29"></a></span>-Wno-tautological-compare <br /> 
<span class="label"><a 
 id="x1-11042r30"></a></span>-Wno-sign-compare <br /> 
<span class="label"><a 
 id="x1-11043r31"></a></span>-Wno-varargs <br /> 
<span class="label"><a 
 id="x1-11044r32"></a></span>-Wno-unused-const-variable <br /> 
<span class="label"><a 
 id="x1-11045r33"></a></span>-DOC_TARGET_NOOPT=1 <br /> 
<span class="label"><a 
 id="x1-11046r34"></a></span>-DNO_MSABI_VA_FUNCS=1
<figcaption class="caption" ><span class="id">Listing 2:</span><span  
class="content">ECC Configuration</span></figcaption><!--tex4ht:label?: x1-11011r -->
</div>
<!--l. 763--><p class="noindent" >Note: /UefiPackages in the sample file denotes an absolute path.
</p><!--l. 765--><p class="noindent" >Warning: Tool developers modifying config.plist or any other OpenCore files must ensure that their tools check the
opencore-version NVRAM variable (see the ?? section below) and warn users if the version listed is unsupported or
prerelease. The OpenCore configuration may change across releases and such tools shall ensure that they carefully follow
this document. Failure to do so may result in such tools being considered to be malware and blocked by any
means.
<a 
 id="x1-11047r11"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-120004"></a>Coding conventions</h4>
<!--l. 774--><p class="noindent" >As with any other project, we have conventions that we follow during development. All third-party contributors are advised to
adhere to the conventions listed below before submitting patches. To minimise abortive work and the potential rejection of
submissions, third-party contributors should initially raise issues to the <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a> for feedback before submitting
patches.
</p><!--l. 781--><p class="noindent" >Organisation. The codebase is contained in the OpenCorePkg repository, which is the primary EDK II package.
</p>
     <ul class="itemize1">
     <li class="itemize">
     <!--l. 785--><p class="noindent" >Whenever changes are required in multiple repositories, separate pull requests should be sent to each.
     </p></li>
     <li class="itemize">
     <!--l. 787--><p class="noindent" >Committing the changes should happen firstly to dependent repositories, secondly to primary repositories to
     avoid automatic build errors.
     </p></li>
     <li class="itemize">
     <!--l. 789--><p class="noindent" >Each unique commit should compile with XCODE5 and preferably with other toolchains. In the majority of the
     cases it can be checked by accessing the <a 
href="https://travis-ci.com/acidanthera" >CI interface</a>. Ensuring that static analysis finds no warnings is preferred.
     </p></li>
     <li class="itemize">
     <!--l. 793--><p class="noindent" >External pull requests and tagged commits must be validated. That said, commits in master may build but may
     not necessarily work.
     </p></li>
     <li class="itemize">
     <!--l. 795--><p class="noindent" >Internal branches should be named as follows: author-name-date, e.g. vit9696-ballooning-20191026.
     </p></li>
     <li class="itemize">
                                                                                                  
                                                                                                  
     
     </div>
     <!--l. 3911--><p class="noindent" ><span class="uwave">On macOS 11 and newer the dedicated </span><span class="uwave">x86legacy</span> <span class="uwave">model always uses </span><span class="uwave">ApECID</span><span class="uwave">. When this configuration setting is left as </span><span class="uwave">0</span>
     <span class="uwave">first 8 bytes of </span><span class="uwave">system-id</span> <span class="uwave">variable are used instead. </span>
     </p><!--l. 3916--><p class="noindent" >On macOS versions before macOS 11, which introduced a dedicated x86legacy model for models without the T2 chip,
     personalised Apple Secure Boot may not work as expected. When reinstalling the operating system, the macOS Installer
     from macOS 10.15 and older will often run out of free memory on the /var/tmp partition when trying to install macOS
     with the personalised Apple Secure Boot. Soon after downloading the macOS installer image, an Unable to verify
     macOS error message will appear.
     </p><!--l. 3924--><p class="noindent" >To workaround this issue, allocate a dedicated RAM disk of 2 MBs for macOS personalisation by entering the following
     commands in the macOS recovery terminal before starting the installation:
</p>
     <!--l. 3927-->
     <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-46011r1"></a></span>disk=$(hdiutil attach -nomount ram://4096) <br /> 
<span class="label"><a 
 id="x1-46012r2"></a></span>diskutil erasevolume HFS+ SecureBoot $disk <br /> 
<span class="label"><a 
 id="x1-46013r3"></a></span>diskutil unmount $disk <br /> 
<span class="label"><a 
 id="x1-46014r4"></a></span>mkdir /var/tmp/OSPersonalizationTemp <br /> 
<span class="label"><a 
 id="x1-46015r5"></a></span>diskutil mount -mountpoint /var/tmp/OSPersonalizationTemp $disk
     
     </div>
     </li>
<li 
  class="enumerate" id="x1-46017x5">
     <!--l. 3936--><p class="noindent" >AuthRestart<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable VirtualSMC-compatible authenticated restart.
     </p><!--l. 3941--><p class="noindent" >Authenticated restart is a way to reboot FileVault 2 enabled macOS without entering the password. A dedicated terminal
     command can be used to perform authenticated restarts: sudo fdesetup authrestart. It is also used when installing
     operating system updates.
     </p><!--l. 3945--><p class="noindent" >VirtualSMC performs authenticated restarts by splitting and saving disk encryption keys between NVRAM and RTC,
     which despite being removed as soon as OpenCore starts, may be considered a security risk and thus is
     optional.
     </p></li>
<li 
  class="enumerate" id="x1-46019x6">
     <!--l. 3950--><p class="noindent" >BlacklistAppleUpdate<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Ignore boot options trying to update Apple peripheral firmware (e.g. MultiUpdater.efi).
     </p><!--l. 3956--><p class="noindent" >Note: Certain operating systems, such as macOS Big Sur, are <a 
href="https://github.com/acidanthera/bugtracker/issues/1255" >incapable</a> of disabling firmware updates by using the
     run-efi-updater NVRAM variable.
     </p></li>
<li 
  class="enumerate" id="x1-46021x7">
     <!--l. 3960--><p class="noindent" ><a 
 id="x1-460207"></a> DmgLoading<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Signed<br 
class="newline" />Description: Define Disk Image (DMG) loading policy used for macOS Recovery.
     </p><!--l. 3966--><p class="noindent" >Valid values:
</p>
                                                                                                  


</body>
</html>